---
import Layout from "../../layouts/Layout.astro";

// Logout logic
if (Astro.request.method === "POST") {
    Astro.cookies.delete("auth", { path: "/" });
    return Astro.redirect("/login");
}
---

<Layout title="Dashboard">
    <main>
        <h1>Dashboard Secreto üïµÔ∏è‚Äç‚ôÇÔ∏è</h1>
        <p>Bienvenido, <strong>{Astro.locals.user?.name}</strong></p>
        <p>Si est√°s viendo esto, es porque el Middleware te dej√≥ pasar.</p>
        
        <form method="POST">
            <button type="submit" class="logout">Cerrar Sesi√≥n</button>
        </form>
    </main>
</Layout>

<style>
    main {
        text-align: center;
        color: white;
        padding: 2rem;
    }
    h1 { color: #00ffaa; }
    .logout {
        margin-top: 2rem;
        padding: 0.5rem 1rem;
        background: #ff4444;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
</style>
